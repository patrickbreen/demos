This is a 2 pass compiler. Sub routines can be defined after they are used.

The target system is a MOS6502.

I used macros, and I see that there are other ways that you could have done this, but I wanted to learn about rust macros, and this is almost as clean as any other solution.